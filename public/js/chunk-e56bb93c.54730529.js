(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e56bb93c"],{"2d34":function(t,e,a){var s=a("e08f"),i=a("9326"),n="["+i+"]",o=RegExp("^"+n+n+"*"),c=RegExp(n+n+"*$"),r=function(t){return function(e){var a=String(s(e));return 1&t&&(a=a.replace(o,"")),2&t&&(a=a.replace(c,"")),a}};t.exports={start:r(1),end:r(2),trim:r(3)}},3829:function(t,e,a){"use strict";a("c9a8")},"421b":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{"interchange-container-pc":t.isPc,"interchange-container-mb":!t.isPc}},[a("div",{staticClass:"success-content"},[t.isRenew?t._e():a("div",{class:{"steps-list":t.isLogin,"steps-list-logged":!t.isLogin}},[a("div",{staticClass:"steps-icon"},[a("div",{staticClass:"pay-radio hook number"},[t.isLogin||t.paySuccess?a("i"):t._e(),t.isLogin||t.paySuccess?t._e():a("span",[t._v(t._s(1))])]),t.isLogin?a("div",{staticClass:"pay-radio hook number"},[t.paySuccess?a("i"):t._e(),t.paySuccess?t._e():a("span",[t._v(t._s(2))])]):t._e(),a("div",{staticClass:"pay-radio number",class:{"pay-radio-gray":!t.paySuccess}},[a("span",[t._v(t._s(t.isLogin?3:2))])])]),a("div",{staticClass:"step-lines"},[a("div",{staticClass:"blue-line",class:{"gray-line":!t.isLogin&&!t.paySuccess}}),a("div",{staticClass:"blue-line",class:{"gray-line":!t.paySuccess}})]),a("div",{staticClass:"steps-icon steps-tips"},[a("span",[t._v(t._s(t.isLogin?t.$t("order/pay.Step-1"):"支付订单"))]),t.isLogin?a("span",[t._v(t._s(t.$t("order/pay.Step-2")))]):t._e(),a("span",[t._v(t._s(t.$t("order/pay.Step-3")))])])]),a("div",{staticClass:"pay-success"},[a("div",{staticClass:"card-wrap"},[a("div",{staticClass:"success-header-line"}),!t.isLogin&&t.paySuccess?a("div",{staticClass:"pay-success-box"},[a("i",{staticClass:"success-icon"}),a("span",{staticClass:"pay-success-first"},[t._v(t._s(t.$t("order/pay.Success-1")))]),a("span",{staticClass:"pay-success-sec"},[t._v(t._s(t.$t("order/pay.Success-2"))+" ")])]):t._e(),!t.isLogin&&!t.paySuccess||t.isLogin?a("div",{staticClass:"pay-success-box"},[a("p",{staticClass:"success-title"},[t._v(t._s(t.$t("order/pay.Title")))]),a("p",{staticClass:"success-description"},[t._v(t._s(t.$t("order/pay.Subtitle")))]),a("div",{staticClass:"card-detail"},[t.paySuccess?a("div",[a("AccountAddress",{attrs:{userAccount:t.userAccount}}),a("a-button",{staticClass:"start-btn",attrs:{type:"primary",disabled:!t.gotTheDetail},on:{click:function(e){return t.startNow()}}},[t._v(" "+t._s("开始使用")+" ")])],1):t._e(),t.paySuccess?t._e():a("div",[a("div",{staticClass:"pay-sync",attrs:{id:"pay-sync"}},[t.paySuccess||t.payFailed?t._e():a("a-spin",[a("a-icon",{staticStyle:{"font-size":"24px",color:"#3963EF"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"})],1),t.paySuccess&&!t.payFailed?a("a-icon",{attrs:{type:"check-circle",theme:"twoTone",twoToneColor:"#44B496"}}):t._e(),t.payFailed?a("a-icon",{attrs:{type:"close-circle",theme:"twoTone",twoToneColor:"#F2585E"}}):t._e(),a("span",{staticClass:"sync-result"},[t._v(t._s(t.payStatus))])],1),!t.payFailed&&t.isPaying||t.paySuccess?a("p",{staticClass:"pay-tips-center"},[t._v(t._s(t.footerText))]):t._e(),t.payFailed&&t.isPaying?a("p",{staticClass:"pay-tips-center"},[t._v(t._s(t.$t("order/pay.Fail-2"))+" "),a("a",{on:{click:function(e){return t.openZendesk()}}},[t._v(t._s(t.$t("order/pay.Fail-3")))])]):t._e(),a("div",{staticClass:"header",class:{"pay-success-header":t.paySuccess}},[t.gotTheDetail?a("div",{staticClass:"btn-container",attrs:{id:"btn-container"}},[a("a-button",{staticClass:"submit-btn",attrs:{type:"primary",id:"submit-btn",disabled:!t.gotTheDetail},on:{click:function(e){return t.payNow()}}},[t._v(" "+t._s(t.btnTips)+" ")]),t.isPaying?t._e():a("a",{staticClass:"submit-btn",staticStyle:{position:"absolute","background-color":"transparent !important"},on:{click:function(e){return t.payNow()}}}),a("a-button",{staticClass:"submit-btn2",attrs:{type:"primary",id:"submit-btn2",ghost:""},on:{click:function(e){return t.userPaid()}}},[t._v(" "+t._s(t.$t("order/pay.Button-1"))+" ")])],1):t._e()]),t.gotTheDetail?t._e():a("div",{staticClass:"package-list-loading"},[a("a-spin",[a("a-icon",{style:{"font-size":t.isPc?"80px":"60px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"})],1)],1),t.gotTheDetail?a("div",{staticClass:"package-list"},[a("p",{staticClass:"package-title"},[t._v(t._s(t.$t("order/pay.Bullet")))]),a("div",{staticClass:"list-item"},[a("p",[t._v(t._s(t.$t("order/pay.List-1")))]),a("p",[t._v(t._s(t.invoiceInfo.order_sn))])]),a("div",{staticClass:"list-item"},[a("p",[t._v(t._s(t.$t("order/pay.List-2")))]),a("p",[t._v(t._s(t.invoiceInfo.shop))])]),a("div",{staticClass:"list-item"},[a("p",[t._v(t._s(t.$t("order/pay.List-3")))]),a("p",[t._v(t._s(t.invoiceInfo.balance)+" ￥")])]),a("div",{staticClass:"list-item"},[a("p",[t._v(t._s(t.$t("order/pay.List-5")))]),a("p",[t._v(t._s(t.invoiceInfo.date))])]),a("div",{staticClass:"list-item"},[a("p",[t._v(t._s(t.$t("order/pay.List-6")))]),a("p",[t._v(t._s(t.invoiceInfo.status))])]),t.isLogin?a("span",{staticClass:"check-invoice-detail",on:{click:function(e){return t.enterInvoiceDetail()}}},[t._v("查看订单详情")]):t._e()]):t._e()])])]):t._e()])])])])},i=[],n=(a("e1d4"),a("a5c9"),a("f5bd"),a("b9d6")),o=a("f466"),c=a("bca7"),r=a("9923"),l={name:"payment",components:{AccountAddress:o["default"]},data:function(){return{userAccount:{},loading:!1,resendTip:!1,secondNum:60,invoiceInfo:{},isAndroid:!1,isIos:!1,isPc:this.isPc(),isLogged:!1,isLogin:!1,isRenew:!1,btnTips:this.$t("order/pay.Status-1"),payStatus:this.$t("order/pay.Paragraph-1"),paySuccess:!1,payFailed:!1,invoiceId:0,intervalId:"",footerText:this.$t("order/pay.Paragraph-2"),payMethodList:[{id:0,name:"order/place:screen4.Tab1",logo:[{name:"alipay",url:"pay/alipay.svg"}],type:"pkjeub-alipay"}],isSentData:!1,payUrl:"",isPaying:!1,gotTheDetail:!1,userMaxRetry:1,retryCount:0,isUserRetry:!1,selectedMethod:localStorage.getItem("payMethodIndex")?Number(localStorage.getItem("payMethodIndex")):0,selectedOtherMethod:{},showMethodList:!1,startPollingTime:0,oldStatus:"",gtagData:void 0,inApp:"true"===localStorage.getItem(c["AU_IN_APP"])}},created:function(){this.isLogin=localStorage.getItem(c["AU_UUID"])&&localStorage.getItem(c["AU_HMAC"]),this.$route.query&&this.$route.query.invoiceId&&(this.invoiceId=this.$route.query.invoiceId),this.$route.params.redirect&&(this.payUrl=this.$route.params.redirect),this.$route.params.gtagData&&(this.gtagData=this.$route.params.gtagData),this.$route.params.isRenew&&(this.isRenew=this.$route.params.isRenew),0!==this.invoiceId&&this.getInvoiceDetail()},mounted:function(){},destroyed:function(){window.clearInterval(this.intervalId)},methods:{enterInvoiceDetail:function(){var t={invoiceId:this.invoiceId};this.$router.push({path:"user/invoice",name:"invoiceDetail",params:t})},startNow:function(){window.open("".concat(VUE_SITE,"?uuid=").concat(localStorage.getItem(c["AU_UUID"]),"&hmac=").concat(localStorage.getItem(c["AU_HMAC"])),this.$inApp?"_self":"_blank")},payNow:function(){if(0!=this.invoiceId){var t=this;this.isPaying?(t.payUrl?window.open(t.payUrl,"_blank"):t.request.payInvoice(t.invoiceId).then((function(e){1===e.code&&e.url&&(t.payUrl=e.url,window.open(t.payUrl,"_blank"))})),t.isUserRetry&&(t.payStatus=t.$t("order/pay.Paragraph-1"),t.payFailed=!1,t.isUserRetry=!1,t.retryCount=0,t.startPolling())):this.paySuccess?window.open("".concat(VUE_SITE,"/my/service"),"_self"):0===this.intervalId.length?(this.isPaying=!0,n["a"].fromTo(document.getElementById("btn-container"),.3,{marginTop:"0"},{css:{marginTop:t.isPc?"30px":"0.4rem"},onStart:function(){n["a"].fromTo(document.getElementById("submit-btn"),.4,{width:t.isPc?"386px":"7.867rem",left:"0"},{width:t.isPc?"176px":"3.68rem",left:t.isPc?"210px":"4.187rem"}),n["a"].fromTo(document.getElementById("submit-btn2"),.4,{width:t.isPc?"386px":"7.867rem"},{css:{width:t.isPc?"176px":"3.68rem"},onComplete:function(){t.btnTips=t.$t("order/pay.Button-2"),t.invoiceInfo.status!==r["default"].t("Paid")&&(t.payUrl?window.open(t.payUrl,"_blank"):t.request.payInvoice(t.invoiceId).then((function(e){1===e.code&&e.url&&(t.payUrl=e.url,window.open(t.payUrl,"_blank"))})))}})}}),n["a"].fromTo(document.getElementById("pay-sync"),.4,{opacity:0},{opacity:1}),this.startPolling()):this.$notification.open({message:this.$t("order/pay.Fail-4"),onClick:function(){}})}else this.$notification.open({message:this.$t("order/pay.Fail-4"),onClick:function(){}})},userPaid:function(){this.payFailed?this.$notification.open({message:this.$t("order/pay.Fail-1"),onClick:function(){}}):(this.payStatus=this.$t("order/pay.Status-3"),this.getInvoiceDetail(),this.isUserRetry=!0)},getInvoiceDetail:function(){var t=this;this.request.getInvoiceDetail(this.invoiceId).then((function(e){if(1===e.code)if(t.gotTheDetail=!0,t.invoiceInfo.invoiceid=e.data.id,t.invoiceInfo.balance=e.data.amount,t.invoiceInfo.shop=e.data.goods.category.name+" - "+e.data.goods.name,t.invoiceInfo.order_sn=e.data.sn,t.invoiceInfo.duedate=e.data.created_at,t.invoiceInfo.date=e.data.created_at,t.invoiceInfo.status=r["default"].t(2===e.data.status?"order/pay.Status-2":"order/pay.Item-6"),t.invoiceInfo=Object.assign({},t.invoiceInfo,""),2===e.data.status){if("Unpaid"===t.oldStatus){var a=document.createElement("div");a.setAttribute("style","display: none; visibility: hidden"),a.innerHTML='<script  type="application/javascript" src="https://a.exoclick.com/tag_gen.js" data-goal="be98d96266307dc8cbedc8001331a95a"><\/script>',document.body.appendChild(a),t.oldStatus=data.data.data.status,t.pushPurchaseEvent(data)}if(window.clearInterval(t.intervalId),t.userAccount={address:"".concat(VUE_SITE,"?uuid=").concat(localStorage.getItem(c["AU_UUID"]),"&hmac=").concat(localStorage.getItem(c["AU_HMAC"])),isFromPaymentPage:!0},t.isPaying=!1,t.paySuccess=!0,window.InappWebInterface){var s={uuid:localStorage.getItem(c["AU_UUID"]),hmac:localStorage.getItem(c["AU_HMAC"])};window.InappWebInterface.webEvent("account",JSON.stringify(s))}}else t.isUserRetry&&(t.retryCount>t.userMaxRetry&&(window.clearInterval(t.intervalId),t.intervalId="",t.payFailed=!0,t.payStatus=t.$t("order/pay.Fail-1")),t.retryCount++);else t.$notification.open({message:"获取订单详情失败，请稍后重试",onClick:function(){}})}))},pushPurchaseEvent:function(t){var e=[];e.push({item_id:t.data.pid,item_name:t.data.name,promotion_id:0,promotion_name:"",coupon:t.data.coupon,affiliation:localStorage.getItem(c["AU_AFF"])?localStorage.getItem(c["AU_AFF"]):"",item_variant:t.data.cycle,price:this.isLogin?t.data.total:t.data.subtotal,currency:"USD"});var a={affiliation:localStorage.getItem(c["AU_AFF"])?localStorage.getItem(c["AU_AFF"]):"",coupon:t.data.coupon,currency:"USD",items:e,transaction_id:t.data.transid,shipping:0,value:this.isLogin?t.data.total:t.data.subtotal,tax:0,traffic_type:"normal"};this.inApp&&window.InappWebInterface&&window.InappWebInterface.webEvent("purchase",JSON.stringify(a))},startPolling:function(){var t=this;0===t.intervalId.length&&(t.startPollingTime=(new Date).getTime(),t.intervalId=setInterval((function(){(new Date).getTime()-t.startPollingTime>18e4?(window.clearInterval(t.intervalId),t.startPollingTime=(new Date).getTime(),t.intervalId=setInterval((function(){(new Date).getTime()-t.startPollingTime>6e5?(window.clearInterval(t.intervalId),t.intervalId=""):t.getInvoiceDetail()}),8e3)):t.getInvoiceDetail()}),4e3))},openZendesk:function(){}}},d=l,p=(a("3829"),a("4ac2")),u=Object(p["a"])(d,s,i,!1,null,null,null);e["default"]=u.exports},"7cd8":function(t,e,a){var s=a("0f4e"),i=a("fdfe"),n=a("9bc6"),o=n("match");t.exports=function(t){var e;return s(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},8846:function(t,e,a){var s=a("9bc6"),i=s("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(a){try{return e[i]=!1,"/./"[t](e)}catch(s){}}return!1}},"88a7":function(t,e,a){"use strict";a("9f1f")},"8f28":function(t,e,a){var s=a("7cd8");t.exports=function(t){if(s(t))throw TypeError("The method doesn't accept regular expressions");return t}},9326:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"9f1f":function(t,e,a){},c9a8:function(t,e,a){},d362:function(t,e,a){var s=a("0f4e"),i=a("5ee6");t.exports=function(t,e,a){var n,o;return i&&"function"==typeof(n=e.constructor)&&n!==a&&s(o=n.prototype)&&o!==a.prototype&&i(t,o),t}},e1d4:function(t,e,a){"use strict";var s=a("cdcb"),i=a("b074"),n=a("7aeb"),o=a("6c39"),c=a("8801"),r=a("fdfe"),l=a("d362"),d=a("62d1"),p=a("d50e"),u=a("49a9"),v=a("a5e4e").f,y=a("fc06").f,f=a("3d27").f,g=a("2d34").trim,h="Number",m=i[h],_=m.prototype,I=r(u(_))==h,b=function(t){var e,a,s,i,n,o,c,r,l=d(t,!1);if("string"==typeof l&&l.length>2)if(l=g(l),e=l.charCodeAt(0),43===e||45===e){if(a=l.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:s=2,i=49;break;case 79:case 111:s=8,i=55;break;default:return+l}for(n=l.slice(2),o=n.length,c=0;c<o;c++)if(r=n.charCodeAt(c),r<48||r>i)return NaN;return parseInt(n,s)}return+l};if(n(h,!m(" 0o1")||!m("0b1")||m("+0x1"))){for(var A,S=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof S&&(I?p((function(){_.valueOf.call(a)})):r(a)!=h)?l(new m(b(e)),a,S):b(e)},C=s?v(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),w=0;C.length>w;w++)c(m,A=C[w])&&!c(S,A)&&f(S,A,y(m,A));S.prototype=_,_.constructor=S,o(i,h,S)}},f0e4:function(t,e,a){"use strict";var s=a("e450"),i=a("fc06").f,n=a("a4fc"),o=a("8f28"),c=a("e08f"),r=a("8846"),l=a("1cd8"),d="".endsWith,p=Math.min,u=r("endsWith"),v=!l&&!u&&!!function(){var t=i(String.prototype,"endsWith");return t&&!t.writable}();s({target:"String",proto:!0,forced:!v&&!u},{endsWith:function(t){var e=String(c(this));o(t);var a=arguments.length>1?arguments[1]:void 0,s=n(e.length),i=void 0===a?s:p(n(a),s),r=String(t);return d?d.call(e,r,i):e.slice(i-r.length,i)===r}})},f466:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{"create-account-box":t.isPc,"create-account-box-mobile":!t.isPc}},[a("div",{staticClass:"content-title"},[t._v(t._s(t.userAddress.length>0?"下面地址打开即可登入账户，请务必妥善保存。 ":"点击下面按钮，创建匿名账户。 "))]),a("div",{staticClass:"content-left-box"},[0===t.userAddress.length?a("a-button",{staticClass:"btn-create-account",attrs:{type:"primary"},on:{click:t.createAccount}},[t._v("创建账户")]):t._e(),t.userAddress.length>0?a("div",{staticStyle:{display:"flex","flex-direction":"column"}},[a("span",{staticClass:"span-address"},[t._v(t._s(t.userAddress))]),a("a-divider",{staticStyle:{"background-color":"#DEE2E8",margin:"0px"}}),a("div",{staticClass:"download-favorite-box"},[a("div",{staticClass:"item-box",on:{click:t.downloadAuAccountInfo}},[t.isPc?a("span",{staticClass:"download-span"},[t._v(t._s("下载账户信息"))]):t._e(),a("a-tooltip",{attrs:{placement:"top",trigger:"click",mouseLeaveDelay:.5,destroyTooltipOnHide:!0}},[a("template",{slot:"title"},[a("span",[t._v("已复制")])]),t.isPc?t._e():a("span",{staticClass:"download-span",on:{click:function(e){return e.stopPropagation(),t.downloadAuAccountInfo()}}},[t._v(t._s("复制账户信息"))])],2)],1),a("a-divider",{staticClass:"divider",attrs:{type:"vertical"}}),t.isPc?a("div",{staticClass:"item-box item-bookmark"},[a("span",{staticClass:"download-span favorite-span",staticStyle:{color:"#3963EF"}},[t._v("拖拽到书签栏")]),a("a",{staticStyle:{position:"absolute",opacity:"0.1"},attrs:{href:t.userAddress},on:{click:function(e){return e.preventDefault(),t.preventOpenAUAdress.apply(null,arguments)}}},[t._v("账户")]),t.showBottomTips?a("span",{staticClass:"login-tips-span"},[t._v("您已登录，付款后该账户可直接使用新套餐。 ")]):t._e()]):t._e(),t.isPc?t._e():a("div",{staticClass:"item-box",on:{click:function(e){return t.addToDeviceDesktop()}}},[a("span",{staticClass:"download-span favorite-span",staticStyle:{color:"#3963EF"}},[t._v("添加到手机桌面")])])],1)],1):t._e()],1),t.showBottomTips&&!t.isPc?a("span",{staticClass:"login-tips-span"},[t._v("您已登录，付款后该账户可直接使用新套餐。 ")]):t._e()])},i=[],n=(a("f0e4"),a("a5c9"),a("bca7")),o={name:"CreateAccount",data:function(){return{isPc:this.isPc(),userAddress:"",showBottomTips:!this.$route.path.endsWith("order/pay")&&localStorage.getItem(n["AU_UUID"])&&localStorage.getItem(n["AU_HMAC"])&&localStorage.getItem(n["AU_SELECTED_SERVICE"])}},props:{userAccount:{}},watch:{userAccount:{immediate:!0,handler:function(t){void 0!==t&&(this.userAddress=t.address)}}},mounted:function(){!this.$route.path.endsWith("order/pay")&&localStorage.getItem(n["AU_UUID"])&&localStorage.getItem(n["AU_HMAC"])&&(this.userAddress="https://www.ausvc.link?uuid=".concat(localStorage.getItem(n["AU_UUID"]),"&hmac=").concat(localStorage.getItem(n["AU_HMAC"])))},methods:{preventOpenAUAdress:function(){},downloadAuAccountInfo:function(){if(this.isPc){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent("下面地址打开即可登入 ".concat(SITE_NAME," 账户，请务必妥善保存。\n").concat(this.userAddress))),t.setAttribute("download","".concat(SITE_NAME," 账户地址")),t.style.display="none",t.click()}else{var e=document.createElement("textarea");e.value=this.userAddress,e.readOnly=!0,document.body.appendChild(e),e.select(),document.execCommand("Copy"),e.className="textarea",e.style.display="none"}},addToDeviceDesktop:function(){},createAccount:function(){var t={recaptchaToken:"333333"},e=this;this.$request.auCreatedNewAddress(t,(function(t){t&&(200===t.status||201===t.status)&&t.data&&(localStorage.setItem(n["AU_UUID"],t.data.uuid),localStorage.setItem(n["AU_HMAC"],t.data.hmac),e.userAddress=t.data.userAddress)}))}}},c=o,r=(a("88a7"),a("4ac2")),l=Object(r["a"])(c,s,i,!1,null,null,null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-e56bb93c.54730529.js.map